34a35
>     private static final int CUTOFF = 5;  // cutoff to middle pivot, must be >= 1
44,45c45
<         StdRandom.shuffle(a);
<         sort(a, 0, a.length - 1);
---
>         sort(a, 0, a.length - 1, 0);
49c49
<     private static void sort(Comparable[] a, int lo, int hi) { 
---
>     private static void sort(Comparable[] a, int lo, int hi, int depth) { 
52c52
<         Comparable v = a[lo];
---
>         Comparable v = a[lo + (depth++ < CUTOFF ? StdRandom.uniform(hi - lo + 1) : ((hi -  lo) >> 1))];
62,63c62,63
<         sort(a, lo, lt-1);
<         sort(a, gt+1, hi);
---
>         sort(a, lo, lt-1, depth);
>         sort(a, gt+1, hi, depth);
